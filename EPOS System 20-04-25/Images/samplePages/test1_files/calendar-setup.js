Calendar.setup=function(e){function t(t,n){if(typeof e[t]=="undefined"){e[t]=n}}function i(e){var t=e.params;var n=e.dateClicked||t.electric;if(n&&t.inputField){t.inputField.value=e.date.print(t.ifFormat);if(typeof t.inputField.onchange=="function")t.inputField.onchange();if(typeof fireEvent=="function")fireEvent(t.inputField,"change")}if(n&&t.displayArea)t.displayArea.innerHTML=e.date.print(t.daFormat);if(n&&typeof t.onUpdate=="function")t.onUpdate(e);if(n&&t.flat){if(typeof t.flatCallback=="function")t.flatCallback(e)}if(n&&t.singleClick&&e.dateClicked)e.callCloseHandler()}t("inputField",null);t("displayArea",null);t("button",null);t("eventName","click");t("ifFormat","%Y/%m/%d");t("daFormat","%Y/%m/%d");t("singleClick",true);t("disableFunc",null);t("dateStatusFunc",e["disableFunc"]);t("dateText",null);t("firstDay",null);t("align","Br");t("range",[1900,2999]);t("weekNumbers",true);t("flat",null);t("flatCallback",null);t("onSelect",null);t("onClose",null);t("onUpdate",null);t("date",null);t("showsTime",false);t("timeFormat","24");t("electric",true);t("step",2);t("position",null);t("cache",false);t("showOthers",false);t("multiple",null);var n=["inputField","displayArea","button"];for(var r in n){if(typeof e[n[r]]=="string"){e[n[r]]=document.getElementById(e[n[r]])}}if(!(e.flat||e.multiple||e.inputField||e.displayArea||e.button)){alert("Calendar.setup:\n  Nothing to setup (no fields found).  Please check your code");return false}if(e.flat!=null){if(typeof e.flat=="string")e.flat=document.getElementById(e.flat);if(!e.flat){alert("Calendar.setup:\n  Flat specified but can't find parent.");return false}var s=new Calendar(e.firstDay,e.date,e.onSelect||i);s.showsOtherMonths=e.showOthers;s.showsTime=e.showsTime;s.time24=e.timeFormat=="24";s.params=e;s.weekNumbers=e.weekNumbers;s.setRange(e.range[0],e.range[1]);s.setDateStatusHandler(e.dateStatusFunc);s.getDateText=e.dateText;if(e.ifFormat){s.setDateFormat(e.ifFormat)}if(e.inputField&&typeof e.inputField.value=="string"){s.parseDate(e.inputField.value)}s.create(e.flat);s.show();return false}var o=e.button||e.displayArea||e.inputField;o["on"+e.eventName]=function(){var t=e.inputField||e.displayArea;var n=e.inputField?e.ifFormat:e.daFormat;var r=false;var s=window.calendar;if(t)e.date=Date.parseDate(t.value||t.innerHTML,n);if(!(s&&e.cache)){window.calendar=s=new Calendar(e.firstDay,e.date,e.onSelect||i,e.onClose||function(e){e.hide()});s.showsTime=e.showsTime;s.time24=e.timeFormat=="24";s.weekNumbers=e.weekNumbers;r=true}else{if(e.date)s.setDate(e.date);s.hide()}if(e.multiple){s.multiple={};for(var o=e.multiple.length;--o>=0;){var u=e.multiple[o];var a=u.print("%Y%m%d");s.multiple[a]=u}}s.showsOtherMonths=e.showOthers;s.yearStep=e.step;s.setRange(e.range[0],e.range[1]);s.params=e;s.setDateStatusHandler(e.dateStatusFunc);s.getDateText=e.dateText;s.setDateFormat(n);if(r)s.create();s.refresh();if(!e.position)s.showAtElement(e.button||e.displayArea||e.inputField,e.align);else s.showAt(e.position[0],e.position[1]);return false};return s}