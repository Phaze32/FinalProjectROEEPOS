function AddToCartOnListProduct(){var e=$jq("#product_addtocart_form").attr("method");var t=$jq(".catalog-product-compare-index").length;var n=$jq(".checkout-cart-index").length;var r=$jq(".wishlist-index-index").length;if(e||t>0||n>0||r>0)return false;$jq(".btn-cart").each(function(){var e=$jq(this).attr("onclick");var t=$jq(".effect_to_cart").attr("value");if(e){e=e.replace("setLocation('","").replace("')","");$jq(this).removeAttr("onclick");$jq(this).live("click",function(){var n=$jq("#ajaxconfig_info a").attr("href");if(e.search("checkout/cart/add")!=-1||e.search("ajaxcartsuper/ajaxcart/add")!=-1){e=e.replace("checkout/cart","ajaxcartsuper/ajaxcart");ajaxToCart(e,"",$jq(this));var r=$jq(this).closest("li").find("img:first");if(!r.length){r=$jq(this).closest(".actions").parent().find(".product-image");if(!r.length){r=$jq(this).closest(".actions").parent().parent().find(".product-image")}if(!r.length){r=$jq(this).closest(".actions").parent().parent().parent().find(".product-image")}if(!r.length){r=$jq(this).closest(".actions").parent().parent().parent().parent().find(".product-image")}if(!r.length){r=$jq(this).parent().parent().parent().parent().parent().find(".product-image")}if(!r.length){r=$jq(this).parent().parent().parent().parent().parent().parent().find(".product-image")}if(!r.length){r=$jq(this).parent().parent().parent().parent().parent().parent().parent().find(".product-image")}}if(t==1){flyToCart($jq(r),$jq(".top-link-cart"))}}else{var i="";var s=$jq(this).parent().parent();var o=null;try{if(s.find(".regular-price").attr("id")){o=s.find(".regular-price").attr("id").replace("product-price-","")}else{o=s.find(".link-wishlist").attr("href").replace(n+"wishlist/index/add/product/","").replace("/","")}}catch(u){getProductInfoFromCart(e);return false}alertify.confirm("Please specify the product's option(s).",function(t){if(t){window.location.href=e}});return false}})}})}function getQuerys(e){if(e=="")return{};var t={};for(var n=0;n<e.length;++n){var r=e[n].split("=");if(r.length!=2)continue;t[r[0]]=decodeURIComponent(r[1].replace(/\+/g," "))}return t}function AddToCartOnProductView(){var e=$jq("#product_addtocart_form").attr("method");var t=$jq(".effect_to_cart").attr("value");if(e){productAddToCartForm.submit=function(e,n){var r=this.form;var i=r.action;if(this.validator&&this.validator.validate()){var s=$jq("#ajaxconfig_info a").attr("href");var o=document.getElementById("producttypeval");var u=o.value;if(u=="giftcards"){var a=new Date;var f=a.getDate();var l=a.getMonth()+1;var c=a.getFullYear();if(f<10){f="0"+f}if(l<10){l="0"+l}a=l+"/"+f+"/"+c;if(document.getElementById("mail_delivery_date_picker")!=null){var h=document.getElementById("mail_delivery_date_picker").value;if(h){if(Date.parse(h)<Date.parse(a)){alert("Please Enter valid date");return false}}}}if(u=="bookable"){var p=$jq("#product_addtocart_form").serialize();var d=getQuerys(p.slice(1).split("&"))["aw_booking_from"];var v=getQuerys(p.slice(1).split("&"))["aw_booking_to"];if(v==""||v==d){alertify.alert("Incorrect date selected.");return false}}var m=document.getElementsByName("product")[0].getAttribute("value");if(typeof document.getElementById("attribute243")!="undefined"&&document.getElementById("attribute243")!=null){var g=document.getElementById("attribute243").value}else{var g=""}var y;if(window.XMLHttpRequest){y=new XMLHttpRequest}else{y=new ActiveXObject("Microsoft.XMLHTTP")}y.onreadystatechange=function(){if(y.readyState==4&&y.status==200){var e=parseInt(y.responseText);var s=/^\+?([1-9]\d*)$/;var o=document.getElementById("qty").value;if(u=="simple"){var e=document.getElementById("totalqty").value}if(!o.match(s)){alertify.alert("Please select valid quantity.");document.getElementById("qty").value=1;return false}var a=parseInt(document.getElementById("qty").value);if(a>e){alertify.confirm("you have select more than available quantity.",function(t){if(t){document.getElementById("qty").value=e}});return false}else{if(n){r.action=n}var f=null;if(!n){n=$jq("#product_addtocart_form").attr("action")}var l=$jq("#product_addtocart_form").serialize();ajaxToCart(n,l,"view");var c=$jq("#product_addtocart_form").find(".product-img-box .product-image img");if(t==1){if($jq("#ajax_cart_super_product_view").attr("class")!="popup"){flyToCart($jq(c),$jq(".top-link-cart"))}}this.form.action=i;if(f){throw f}}}};y.open("GET",s+"catalog/product/getProductAvailableQty/id/"+m+"/producttype/"+u+"/sizevalue/"+g+"/",true);y.send()}return false}}}function getProductIdFrom(e){var t=e.split("/");var n="";while(t.length>0&&n==""){n=t.pop()}return n}function getProductInfoFromCart(e){$jq.ajax({url:e,type:"GET",data:{},beforeSend:function(){showLoadingAnimation()},success:function(e){hideLoadingAnimation();var t=$jq(e);var n=t.find("#product_addtocart_form").attr("action");var r=getProductIdFrom(n);var i=$jq("#ajaxconfig_info a").attr("href");var s=i+"ajaxcartsuper/index/productview/id/"+r;$jq.fancybox({width:"75%",height:885,autoScale:false,transitionIn:"none",transitionOut:"none",type:"iframe",href:s,closeBtn:true,afterClose:function(){}})}})}function addProductCompare(){$jq("ul.add-to-links li a.link-compare").each(function(){var e=$jq(this).attr("href");if(e.search("product_compare/add/product")!=-1){$jq(this).bind("click",function(){ajaxToCart(e,"","");return false})}})}function addProductToCartFromWishlist(){$jq("li .link-cart").each(function(){var e=$jq(this).attr("href");$jq(this).bind("click",function(){ajaxToCart(e,"","");return false})})}function addProductWishlist(){$jq("a.link-wishlist").each(function(){var e=$jq(this).attr("href");var t=$jq("#ajaxconfig_info a").attr("href")+"customer/account/login/";if(e.search("wishlist/index/add/product")!=-1){$jq(this).bind("click",function(){var n=$jq("#ajaxconfig_info input").attr("value");if(n!=1){location.href(t);return false}ajaxToCart(e,"","");return false})}})}function addToWishlistCompareOnProductView(){var e=$jq("#ajaxconfig_info input").attr("value");if(e==1){$jq(".product-view .link-wishlist").removeAttr("onclick")}$jq(".product-view .link-wishlist, .product-view .link-compare").bind("click",function(){var e=$jq(this).attr("href");ajaxToCart(e,"","");return false})}function removeCompareProductLink(){$jq("#compare-items li .btn-remove").each(function(){var e=$jq(this).attr("href");try{if(e.search("product_compare/remove/product")!=-1){$jq(this).removeAttr("href");$jq(this).removeAttr("onclick");$jq(this).live("click",function(){if(alertify.confirm("Are you sure you would like to remove this item from the compare products?")){ajaxToCart(e,"","")}return false})}}catch(t){}})}function removeWislishProductLink(){$jq("#wishlist-sidebar li .btn-remove").each(function(){var e=$jq(this).attr("href");if(e.search("wishlist/index/remove")!=-1){$jq(this).attr("href","javascript:void(0)");$jq(this).removeAttr("onclick");$jq(this).live("click",function(){if(alertify.confirm("Are you sure you would like to remove this item from the wishlist products?")){ajaxToCart(e,"","")}return false})}})}function showLoadingAnimation(){var e=$jq("#ajaxconfig_info button").attr("name");var t=$jq("#ajaxconfig_info button").attr("value");var n=$jq("#ajaxconfig_info img").attr("src");var r="position: fixed;top:0;left:0;filter: alpha(opacity=70); z-index:99999;background-color:"+e+"; width:100%;height:100%;opacity:"+t+"";var i='<div id ="wraper_ajax" style ="'+r+'" ><div  class ="loadding_ajaxcart" style ="z-index:999999;position:fixed; top:50%; left:50%;"><img src="'+n+'"/></div></div>';if($jq("#wraper_ajax").length==0){$jq("body").append(i)}}function showBoxInfo(e){var t=$jq("#ajaxconfig_info a").attr("href");var n=t+"checkout/cart";var r="<div class ='wrapper_box addto-bxo-pop'>";r+="<div class=''><p class ='info'>The following item has been added to your shopping basket:</p><a a href= 'javascript:void(0)'  id ='continue_shopping' class='close-pop'></a></div>";r+="<div id ='product_info_box'>"+e+"</div>";r+="<div class='vb_cs_btns'><a href= 'javascript:void(0)'  id ='continue_shopping'>Continue shopping</a>";r+="<a href='"+n+"' target='_blank' id ='shopping_cart'>View Your Basket</a></div></div>";$jq(r).insertAfter("#wraper_ajax");$jq("#wraper_ajax").css("opacity",.8)}function showBoxInfoWishlist(e){var t=$jq("#ajaxconfig_info a").attr("href");var n=t+"wishlist/";var r="<div class ='wrapper_box addto-bxo-pop'>";r+="<div><p class ='info'>Product added to wishlist successfully</p><a a href= 'javascript:void(0)'  id ='continue_shopping' class='close-pop'></a></div>";r+="<div id ='product_info_box'>"+e+"</div>";r+="<div  class='vb_cs_btns'><a href= 'javascript:void(0)'  id ='continue_shopping' class ='cs-btn'>Continue shopping</a>";r+="<a href='"+n+"' target='_blank' id ='shopping_cart' class = 'pw-btn'>Go to wishlist</a></div></div>";$jq(r).insertAfter("#wraper_ajax");$jq("#wraper_ajax").css("opacity",.8)}function showBoxInfoCompare(e){var t=$jq("#ajaxconfig_info a").attr("href");var n=t+"catalog/product_compare/index/";var r="<div class ='wrapper_box pop_compare'>";r+="<div><p class ='info'>Add product to Compare sucessfully</p></div>";r+="<div id ='product_info_box'>"+e+"</div>";r+="<div><a href= 'javascript:void(0)'  id ='continue_shopping'>Continue shopping</a></div>";r+="<div><a class='list-compare' href='"+n+"'>Go to list Compare</a></div></div>";$jq(".loadding_ajaxcart").html(r);$jq(r).insertAfter("#wraper_ajax");$jq("#wraper_ajax").css("opacity",.8)}function hideLoadingAnimation(){$jq(".loadding_ajaxcart,#wraper_ajax,.wrapper_box").remove()}function showMiniAjaxCart(){$jq("#mini_cart_block").show()}function hideMiniAjaxCart(){$jq("#mini_cart_block").slideUp();$jq("#mini_cart_block").hide()}function changeDelelteUrl(){var e='<script type ="text/javascript">\n                                   $jq("#cart-sidebar a.btn-remove").each(function(){\n                                        var delUrl = $jq(this).attr("href");\n                                        $jq(this).attr("href","#"); \n                                        $jq(this).live("click",function(){\n                                            $jq(this).attr("onclick",ajaxToCart(delUrl,"","view"));\n                                                return false;                               \n                                        });   \n                                });\n                                \n                    </script>';return e}function ajaxToCart(e,t,n){e=e.replace("checkout/cart","ajaxcartsuper/ajaxcart");try{$jq.ajax({url:e,dataType:"json",type:"post",data:t,beforeSend:function(){showLoadingAnimation()},success:function(t){if(t.status==1){var r=$jq("#ajaxconfig_info a").attr("href");if($jq("#shopping-cart-totals-table").length){}if(t.sidebar_cart){$$(".sidebar .block-cart").each(function(e){e.replace(t.sidebar_cart)});if(n=="view"){if($jq("#ajax_cart_super_product_view").attr("class")=="popup"){window.parent.insertContentToParent(".sidebar .block-cart",t.sidebar_cart);window.parent.deleteCartInSidebar()}}}if(t.top_link){var i=$jq(t.top_link).find(".top-link-cart").html();$jq(".top-link-cart").html("");$jq(".top-link-cart").html(i);if(n=="view"){if($jq("#ajax_cart_super_product_view").attr("class")=="popup"){window.parent.insertContentTopLinkToParent(".quick-access ul.links",t.top_link)}}}if(t.mini_cart){$jq("#mini_cart_block").html("");$jq("#mini_cart_block").html(t.mini_cart);if(n=="view"){if($jq("#ajax_cart_super_product_view").attr("class")=="popup"){window.parent.insertContentMiniCartToParent("#mini_cart_block",t.mini_cart)}}}if(t.checkout_cart){$jq(".col-main .cart").html("");$jq(".col-main .cart").append(t.checkout_cart)}if(t.type_sidebar=="compare"){$$(".sidebar .block-compare").each(function(e){e.replace(t.sidebar_compare)});if(t.product_info){showBoxInfoCompare(t.product_info);return false}else{hideLoadingAnimation()}}if(t.type_sidebar=="wishlist"){if(!$jq(".sidebar .block-wishlist").length){$jq('<div class="block block-wishlist"></div>').insertAfter(".sidebar .block-cart")}$$(".sidebar .block-wishlist").each(function(e){e.replace(t.wishlist_sidebar)});$jq(".quick-access ul.links").html("");$jq(".quick-access ul.links").html(t.top_link);if(t.product_info){showBoxInfoWishlist(t.product_info);return false}else{hideLoadingAnimation()}}if(t.product_info){showBoxInfo(t.product_info)}else{hideLoadingAnimation()}}else{if(t.status==0){if(!confirm(t.message)){hideLoadingAnimation();return false}hideLoadingAnimation();if(t.url_wislist){location.href=t.url_wislist;return false}}if(t.type_product_ajax==1){location.href=e;return false}}return false}})}catch(r){alert("erreror here");setLocation(e)}}function flyToCart(e,t,n){try{var r=$jq(this);var i=3;var s=$jq(e).clone();$jq(s).css({position:"absolute",top:$jq(e).offset().top+"px",right:"8%",opacity:1,"z-index":1e3});$jq("body").append($jq(s));if($jq(t)){var o=$jq(t).offset().left+$jq(t).width()/2-$jq(e).width()/i/2;var u=$jq(t).offset().top+$jq(t).height()/2-$jq(e).height()/i/2;$jq(s).animate({opacity:.7,right:"8%",top:u,width:135,height:135},1e3,function(){$jq(t).fadeOut("slowly",function(){$jq(t).fadeIn("slowly",function(){$jq(s).fadeOut("slowly",function(){$jq(s).remove();if(n!=null){n.apply(r)}})})})})}}catch(a){}}function insertContentToParent(e,t){$$(".sidebar .block-cart").each(function(e){e.replace(t)});return false}function insertContentTopLinkToParent(e,t){$jq(e).html("");$jq(e).append(t);return false}function insertContentMiniCartToParent(e,t){$jq(e).html("");$jq(e).append(t);$jq("#mini_cart_block").show();deleteCartInSidebar();return false}function deleteCartInCheckoutPageBackup(){$jq("#shopping-cart-table a.btn-remove2").each(function(){var e=$jq(this).attr("href");$jq(this).attr("link",e);$jq(this).attr("href","javascript:void(0)");$jq(this).live("click",function(){if(!confirm("Are you sure delete this product out of shopping cart?")){return false}showLoadingAnimation();e=e.replace("checkout/cart/delete","ajaxcartsuper/index/cartdelete");new Ajax.Request(e,{method:"post",postBody:"",onException:function(e,t){alert("Exception : "+t)},onComplete:function(e){var t=$jq(e.responseText);var n=t.find("#top_link_content").html();$jq(".top-link-cart").html(n);$jq(".main-container").html("");$jq(".main-container").html(e.responseText);hideLoadingAnimation()}});return false})})}function deleteCartInCheckoutPage(){$jq(".checkout-cart-index a.btn-remove").removeAttr("onclick");$jq(".checkout-cart-index a.btn-remove2,.checkout-cart-index a.btn-remove").click(function(e){e.preventDefault();var t=$jq(this).attr("href");t=t.replace("checkout/cart/delete","ajaxcartsuper/index/cartdelete");alertify.confirm("Are you sure would like to remove this item from the shopping cart?",function(e){if(e){$jq.ajax({url:t,type:"POST",data:{},beforeSend:function(){showLoadingAnimation()},success:function(e){$("ajaxcart-checkout-content").innerHTML=e;$("ajaxcart-checkout-content").insert(e);var t=$("ajaxcart-checkout-content").down(".cart_content").innerHTML;$jq(".top-link-cart").html(t);var n=$("ajaxcart-checkout-content").down(".top-cart-wrapper").innerHTML;$$(".top-cart-contain").each(function(e){e.replace(n)});var r=$("ajaxcart-checkout-content").down(".ajaxcart_checkout_content").innerHTML;$$(".cart").each(function(e){e.replace(r)});location.reload();$jq("#ajaxcart-checkout-content").html("")}})}else{return false}});$jq(document).ajaxComplete(function(){getQuote();getDiscountCodes();slideEffectAjax()})});return false}function getDiscountCodes(){$jq("#discount-coupon-form").attr("id","discount-coupon-form-ajax");var e=new VarienForm("discount-coupon-form-ajax");discountForm.submit=function(t){if(t){$("coupon_code").removeClassName("required-entry");$("remove-coupone").value="1"}else{$("coupon_code").addClassName("required-entry");$("remove-coupone").value="0"}return VarienForm.prototype.submit.bind(e)()}}function getQuote(){$jq("#shipping-zip-form").attr("id","shipping-zip-form-ajax");var e=new VarienForm("shipping-zip-form-ajax");coShippingMethodForm.submit=function(){var e=$F("country");var t=false;for(i=0;i<countriesWithOptionalZip.length;i++){if(countriesWithOptionalZip[i]==e){t=true}}if(t){$("postcode").removeClassName("required-entry")}else{$("postcode").addClassName("required-entry")}if(this.validator.validate()){this.form.submit()}console.log(countriesWithOptionalZip.length)}.bind(e)}function slideEffectAjax(){$jq(".top-cart-contain").mouseenter(function(){$jq(this).find(".top-cart-content").stop(true,true).slideDown()});$jq(".top-cart-contain").mouseleave(function(){$jq(this).find(".top-cart-content").stop(true,true).slideUp()})}function deleteCartInSidebar(){var e=$jq(".checkout-cart-index").length;if(e>0)return false;$jq("#cart-sidebar a.btn-remove, #mini_cart_block a.btn-remove").each(function(){var e=$jq(this).attr("href");$jq(this).attr("href","#");$jq(this).attr("onclick","");if(e.search("checkout/cart/delete")!=-1){$jq(this).live("click",function(){if(alertify.confirm("Are you sure you would like to remove this item from the shopping cart?",function(t){if(t){$jq(this).attr("onclick",ajaxToCart(e,"","view"))}}))return false})}})}$jq(document).ready(function(){var e=$jq("#enable_module").val();if(e==0||!e)return false;$jq(".quick-access ul li a").each(function(){var e=$jq(this).attr("href");if(e.search("/wishlist/")!=-1){$jq(this).addClass("top_link_wishlist")}});var t=$jq(".top-link-checkout").attr("href")+"onepage";$jq(".top-link-checkout").attr("href",t);deleteCartInSidebar();deleteCartInCheckoutPage();addProductCompare();removeCompareProductLink();addToWishlistCompareOnProductView();addProductWishlist();addProductToCartFromWishlist();removeWislishProductLink();AddToCartOnListProduct();AddToCartOnProductView();$jq("#continue_shopping, #shopping_cart").live("click",function(){hideLoadingAnimation();$jq("#mini_cart_block").show();if($jq("#ajax_cart_super_product_view").attr("class")=="popup"){parent.$jq.fancybox.close()}});$jq("#wraper_ajax").live("click",function(){$jq("#wraper_ajax, .wrapper_box").remove()});$jq(".ajaxcartsuper-index-productview #mini_cart_block").hide();slideEffectAjax()});$jq(document).ajaxComplete(function(){$jq(".ajaxcartsuper-index-productview #mini_cart_block").hide();AddToCartOnListProduct();deleteCartInSidebar();removeCompareProductLink();removeWislishProductLink();addProductToCartFromWishlist();addProductCompare();addProductWishlist()})